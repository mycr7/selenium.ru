---
layout: page
title: Устанавливаем свой маленький локальный веб-сервер
joomla_id: 136
joomla_url: installing-xampp
date: 2015-05-21 14:25:15.000000000 +03:00
author: Алексей Баранцев
excerpt: |-
  <p>Нередко возникает ситуация, когда вам понадобился свой личный веб-сервер для тестовых целей. Например, вы выбираете баг-трекер, но публичной демо-версии нет -- надо его куда-нибудь установить, чтобы попробовать. Или вы хотите научиться пользоваться каким-нибудь инструментом для нагрузочного тестирования –- не стоит сразу "натравливать" его даже на общедоступный тестовый стенд, не говоря уж о системе, с которой работают реальные пользователи, этим вы создадите им массу проблем.</p>
  <p>На многих наших тренингах с домашними заданиями (программирование для тестировщиков на <a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=1">Java</a>, <a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=226">C#</a>, <a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=233">Python</a>, разного уровня сложности <a href="trainings.html">курсы по Selenium</a>, курсы по тестированию <a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=19">производительности</a> и <a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=126">защищенности</a> веб-приложений) самым первым заданием для учеников является подготовка учебного тестового стенда, в том числе установка локального веб-сервера, на котором впоследствии разворачиваются учебные приложения.</p>
  <p>Типовая инфраструктура для развертывания современных веб-приложений включает в себя как минимум три составных элемента:</p>
  <ul>
  <li>интерпретатор языка программирования, на котором реализовано веб-приложение (PHP, Python, Ruby, .Net, Java, ...),</li>
  <li>база данных, в которой приложение хранит данные (MySQL, Postgress, MS SQL Server, Oracle, ...),</li>
  <li>веб-сервер, который принимает запросы от клиентов и перенаправляет их приложению (Apache, Nginx, IIS, ...)</li>
  </ul>
  <p>Для каждого узла инфраструктуры есть выбор из целого ряда альтернатив, и комбинировать их можно различными способами.</p>
  <p>Но есть исторически сложившаяся тройка, пользующаяся особой популярностью -- Apache + MySQL + PHP.</p>
  <p>Для неё существуют готовые инсталляционные пакеты "три в одном", которые позволяют устанавливать компоненты не по отдельности, а все разом. Иногда эти пакеты включают также некоторые дополнительные компоненты.</p>
  <p>Из множества подобных пакетов мы выбрали <a href="https://www.apachefriends.org/ru/index.html">XAMPP</a>, потому что он предлагает инсталляторы для трёх основных операционных систем -- Windows, Linux, OS X, в отличие от большинства конкурентов, ориентированных как правило только на какую-нибудь одну из платформ.</p>
  <p>В этой инструкции будет описана установка XAMPP на операционную систему Windows. Процесс установки для других операционных систем может несколько отличаться.</p>
category: Статьи
---
<p>Нередко возникает ситуация, когда вам понадобился свой личный веб-сервер для тестовых целей. Например, вы выбираете баг-трекер, но публичной демо-версии нет -- надо его куда-нибудь установить, чтобы попробовать. Или вы хотите научиться пользоваться каким-нибудь инструментом для нагрузочного тестирования –- не стоит сразу "натравливать" его даже на общедоступный тестовый стенд, не говоря уж о системе, с которой работают реальные пользователи, этим вы создадите им массу проблем.</p>
<p>На многих наших тренингах с домашними заданиями (программирование для тестировщиков на <a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=1">Java</a>, <a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=226">C#</a>, <a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=233">Python</a>, разного уровня сложности <a href="trainings.html">курсы по Selenium</a>, курсы по тестированию <a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=19">производительности</a> и <a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=126">защищенности</a> веб-приложений) самым первым заданием для учеников является подготовка учебного тестового стенда, в том числе установка локального веб-сервера, на котором впоследствии разворачиваются учебные приложения.</p>
<p>Типовая инфраструктура для развертывания современных веб-приложений включает в себя как минимум три составных элемента:</p>
<ul>
<li>интерпретатор языка программирования, на котором реализовано веб-приложение (PHP, Python, Ruby, .Net, Java, ...),</li>
<li>база данных, в которой приложение хранит данные (MySQL, Postgress, MS SQL Server, Oracle, ...),</li>
<li>веб-сервер, который принимает запросы от клиентов и перенаправляет их приложению (Apache, Nginx, IIS, ...)</li>
</ul>
<p>Для каждого узла инфраструктуры есть выбор из целого ряда альтернатив, и комбинировать их можно различными способами.</p>
<p>Но есть исторически сложившаяся тройка, пользующаяся особой популярностью -- Apache + MySQL + PHP.</p>
<p>Для неё существуют готовые инсталляционные пакеты "три в одном", которые позволяют устанавливать компоненты не по отдельности, а все разом. Иногда эти пакеты включают также некоторые дополнительные компоненты.</p>
<p>Из множества подобных пакетов мы выбрали <a href="https://www.apachefriends.org/ru/index.html">XAMPP</a>, потому что он предлагает инсталляторы для трёх основных операционных систем -- Windows, Linux, OS X, в отличие от большинства конкурентов, ориентированных как правило только на какую-нибудь одну из платформ.</p>
<p>В этой инструкции будет описана установка XAMPP на операционную систему Windows. Процесс установки для других операционных систем может несколько отличаться.</p><h2>Часть 1: делай раз, делай два, делай три!</h2>
<p><strong>1. Отправляемся на сайт <a href="https://www.apachefriends.org/ru/index.html">https://www.apachefriends.org/ru/index.html</a>, выбираем дистрибутив для нужной операционной системы, и загружаем его:</strong></p>
<p><img src="images/articles/barancev/xampp/01_site.png" border="0" width="500" height="273" /></p>
<p><strong>2. Запускаем инсталлятор и следуем инструкциям визарда. Наибольший интерес представляет шаг, на котором выбирается набор устанавливаемых компонентов:</strong></p>
<p><img src="images/articles/barancev/xampp/02_installer.png" border="0" /></p>
<p>Ясно, что нужно обязательно выбрать базовые элементы "тройки" -- Apache + MySQL + PHP. Но в дополнение к этому можно установить ещё какие-то из предлагаемых компонентов:</p>
<ul>
<li><strong>FileZilla FTP Server</strong> -- как следует из названия, это FTP-сервер, он может быть полезен, если, например, XAMPP устанавливается на виртуальную машину, тогда файлы устанавливаемых веб-приложений туда удобно будет загружать по протоколу FTP&lt;</li>
<li><em>Mercury Mail Server</em> -- опять таки, из названия ясно, что сервер для работы с электронной почтой, поддерживает протоколы POP3, IMAP, SMTP, но лично мне он кажется неудобным, поэтому я предпочитаю его не ставить, а использовать что-нибудь альтернативное</li>
<li><em>Tomcat</em> -- это сервер приложений для JavaEE, его имеет смысл устанавливать только в том случае, если вы собираетесь развёртывать веб-приложения, написанные на Java</li>
<li><em>Perl</em> -- язык программирования, который одно время был достаточно популярен среди веб-разработчиков, но в последнее время используется достаточно редко</li>
<li><strong>phpMyAdmin</strong> -- веб-интерфейс для управления СУБД MySQL, имеет смысл его установить, потому что для локального веб-сервера это, наверное, самый удобный способ конфигурирования СУБД MySQL</li>
<li><em>Webalizer</em> -- это веб-прилрожение для анализа лог-файлов сервера и сбора статистики, для локального веб-сервера вещь бесполезная, если только вы не собираетесь использовать эту информацию, например, при нагрузочном тестировании</li>
<li><em>Fake Sendmail</em> -- это "неполноценная" реализация утилиты sendmail для Windows, с большой вероятностью она вам не пригодится, потому что почту из веб-приложений обычно можно отправлять и без этой утилиты</li>
</ul>
<p><strong>3. После выбора компонентов на следующем шаге нужно выбрать директорию, в которую будет установлен XAMPP.</strong></p>
<p>Рекомендуется использовать директорию, путь к которой не содержит пробелов и все названия директорий в этом пути в именах содержат только символы латинского алфавита или цифры. В общем, избегайте "плохих" символов в пути.</p>
<p>И после этого шага, наконец, начинается установка.</p>
<p><strong>4. Когда процедура установки завершится, запускаем панель управления XAMPP.</strong></p>
<p><strong>В ней нужно активировать два модуля -- Apache и MySQL</strong>, нажав две соответствующие кнопки Start:</p>
<p><img src="images/articles/barancev/xampp/03_control_panel.png" border="0" width="500" height="323" /></p>
<p>Если всё пройдёт успешно, названия модулей окрасятся в зелёный цвет и станет активной кнопка Admin для каждого из них:</p>
<p><img src="images/articles/barancev/xampp/04_running.png" border="0" width="500" height="323" /></p>
<p><strong>5. Осталось только зайти браузером по адресу <a href="http://localhost/" target="_blank">http://localhost/</a> и убедиться, что веб-сервер действительно работает:</strong></p>
<p><img src="images/articles/barancev/xampp/05_localhost.png" border="0" width="500" height="266" /></p>
<p><strong>6. Затем зайти браузером по адресу <a href="http://localhost/phpmyadmin/" target="_blank">http://localhost/phpmyadmin/</a> и убедиться, что СУБД MySQL тоже работает и доступна:</strong></p>
<p><img src="images/articles/barancev/xampp/06_phpmyadmin.png" border="0" width="500" height="267" /></p>
<p>Теперь на сервер можно устанавливать веб-приложения, но это уже другая история.</p>
<p><strong>Если у вас всё запустилось и в браузере открылась приветственная страница XAMPP -- дальше можно не читать.</strong></p>
<p>Вся оставшаяся часть статьи посвящена рассмотрению различных проблем и возможных методов их решения.</p>
<h2>Часть 2. Что-то пошло не так...</h2>
<h3>F1. Не запускается MySQL</h3>
<p>Наиболее вероятная причина -- занят порт 3306, при этом в окне информации в панели управления XAMPP можно будет увидеть, какое именно другое приложение заняло порт.</p>
<p>Скорее всего это связано с тем, что у вас уже установлен вне XAMPP и запущен другой экземпляр СУБД MySQL:</p>
<p><img src="images/articles/barancev/xampp/07_mysql.png" border="0" width="500" height="346" /></p>
<p>Что делать?</p>
<p>Конечно, достаточно только одного запущенного экземпляра СУБД MySQL на компьютере. Вы можете оставить тот, который у вас уже используется, и вообще не запускать MySQL в рамках XAMPP.</p>
<p>Однако в этом случае вам, вероятно, придётся настроить логин и пароль для доступа к этому существующему экземпляру СУБД MySQL из приложения phpMyAdmin.</p>
<p>Нажимаем кнопку Config напротив модуля Apache и из выпадающего меню выбираем пункт phpMyAdmin:</p>
<p><img src="images/articles/barancev/xampp/08_open_phpmyadmin_config.png" border="0" width="500" height="348" /></p>
<p>В текстовом редакторе открывается конфигурационный файл приложения phpMyAdmin, в котором нужно указать логин и пароль администратора СУБД:</p>
<p><img src="images/articles/barancev/xampp/09_phpmyadmin_config.png" border="0" width="500" height="254" /></p>
<p>(Если текстовый редактор показывает текст в "скомканном" виде, см. ниже <a href="#f3">раздел F3</a>)</p>
<p>Сохраняем внесённые в файл изменения и заходим браузером по адресу <a href="http://localhost/phpmyadmin/" target="_blank">http://localhost/phpmyadmin/</a>, чтобы убедиться, что СУБД MySQL доступна.</p>
<h3>F2. Не запускается Apache</h3>
<p>И опять наиболее вероятная причина -- занят порт 80 или 443, при этом в окне информации в панели управления XAMPP можно будет увидеть, какое именно другое приложение заняло порт:</p>
<p><img src="images/articles/barancev/xampp/10_apache.png" border="0" width="500" height="346" /></p>
<p>На этот раз "конкурентов" больше.</p>
<h4>F2.1 Port 80 in use by "C:\Program Files (x86)\Skype\Phone\Skype.exe"</h4>
<p>Как это ни странно звучит, порты 80 и 443 часто занимает Skype, причём это ему совершенно не нужно для нормальной работы. Идём в настройки Skype, отключаем, после чего перезапускаем скайп -- и порт свободен:</p>
<p><img src="images/articles/barancev/xampp/11_skype_settings.png" border="0" width="500" height="427" /></p>
<p>К сожалению, отключить эту настройку можно не во всех версиях Skype. Если вы являетесь счастливым обладателем Windows 8 и используете так называемую версию <a href="http://www.skype.com/en/download-skype/skype-for-windows-8-tablet/">"Skype for modern Windows"</a> вам не повезло -- в ней невозможно отключить использование портов 80 и 443.</p>
<p>Что делать?</p>
<p>Можно либо установить версию <a href="http://www.skype.com/en/download-skype/skype-for-computer/">"Skype for Windows desktop"</a>, в которой присутствует нужная настройка, либо перенастроить Apache на использование других, незанятых, портов, как это описано чуть ниже, в разделе F2.3.</p>
<h4>F2.2 Port 80 in use by "Unable to open process" with PID 4</h4>
<p>Это означает, что у вас на компьютере запущен сервер Microsoft IIS (Internet Information Services).</p>
<p>Если он вам не нужен -- можно его отключить, а вместо него запустить XAMPP.</p>
<p>См. <a href="https://technet.microsoft.com/ru-ru/library/cc732317%28v=ws.10%29.aspx?f=255&amp;MSPPError=-2147217396">инструкцию по отключению IIS на официальном сайте Microsoft</a></p>
<p>Если IIS вам нужен, тогда придётся один из серверов (либо IIS, либо Apache) перенастроить на использование других, незанятых, портов, как это описано в следующем разделе.</p>
<h4>F2.3 Port 80 in use by ...</h4>
<p>Кроме двух описанных выше ситуаций, порты может занимать какой-то другой веб-сервер.</p>
<p>Тут возникает резонный вопрос -- если у вас уже есть веб-сервер, может быть не стоит устанавливать XAMPP, а продолжить использовать уже имеющийся?</p>
<p>Другой вариант -- остановить или полностью удалить ранее использовавшийся сервер, и вместо него спокойно установить XAMPP.</p>
<p>Ну и наконец, если вы по каким-то причинам хотите оставить оба веб-сервера, не можете перенастроить Skype или IIS -- тогда придётся разрешить конфликт портов и перенастроить Apache, входящий в состав XAMPP на другие порты.</p>
<p>Сначала надо выбрать два свободных порта, которые будут использоваться вместо 80 и 443.</p>
<p>Чтобы посмотреть, какие порты заняты, можно воспользоваться встроенной в XAMPP утилитой Netstat:</p>
<p><img src="images/articles/barancev/xampp/12_netstat.png" border="0" width="500" height="324" /></p>
<p>Предположим, выбраны незанятые порты 8080 и 8443.</p>
<p>Изменения нужно внести в трёх местах.</p>
<p>Сначала меняем общие настройки. Там указываются порты, по которым XAMPP будет проверять, "живы" ли его модули:</p>
<p><img src="images/articles/barancev/xampp/13_xampp_settings.png" border="0" width="500" height="445" /></p>
<p>Но основные изменения нужно внести в конфигурационные файлы самого модуля Apache. Необходимо модифицировать два файла -- httpd.conf и httpd-ssl.conf.</p>
<p>Нажимаем кнопку Config напротив модуля Apache и из выпадающего меню выбираем нужный пункт:</p>
<p><img src="images/articles/barancev/xampp/14_open_apache_settings.png" border="0" width="500" height="348" /></p>
<p>В текстовом редакторе открывается конфигурационный файл, в котором нужно найти инструкцию Listen и изменить порт на выбранный:</p>
<p><img src="images/articles/barancev/xampp/15_apache_settings.png" border="0" width="500" height="236" /></p>
<p>(Если текстовый редактор показывает текст в "скомканном" виде, см. ниже <a href="#f3">раздел F3</a>)</p>
<p>Сохраняем файл и повторяем аналогичные действия для второго конфигурационного файла.</p>
<p>После этого можно снова попытаться запустить Apache, и на этот раз он должен успешно стартовать.</p>
<p>Единственное неудобство в этом случае заключается в том, что нестандартный номер порта придётся всегда указывать в адресе -- теперь ваш веб-сервер будет доступен по адресу <a href="http://localhost:8080/">http://localhost:8080/</a></p>
<h3><a name="f3"></a>F3. Конфигурационные файлы показываются в "скомканном" виде.</h3>
<p><img src="images/articles/barancev/xampp/16_notepad.png" border="0" width="500" height="203" /></p>
<p>Используйте вместо notepad.exe какой-нибудь более "интеллектуальный" текстовый редактор, например, <a href="https://notepad-plus-plus.org/">Notepad++</a>:</p>
<p><img src="images/articles/barancev/xampp/16_editor_settings.png" border="0" width="500" height="348" /></p>
<h3>F4. Apache успешно запустился, но по адресу <a href="http://localhost/" target="_blank">http://localhost/</a> находится не XAMPP</h3>
<p>Если в настройках Apache указан не стандартный порт 80, а какой-то альтернативный, в этом случае нужно явно указать номер порта в адресе, например, <a href="http://localhost:8080/" target="_blank">http://localhost:8080/</a></p>
<h3>F5. Apache успешно запустился, но адрес <a href="http://localhost/" target="_blank">http://localhost/</a> не открывается в браузере</h3>
<p>Возможные причины:</p>
<p>-- система не знает, что означает сетевое имя localhost, либо<br />-- в браузере указаны настройки прокси, которые не позволяют устанавливать соединения с локальным сервером.</p>
<p>Чтобы исключить первую причину, попробуйте в адресе указать не сетевое имя, а IP-адрес: <a href="http://127.0.0.1/" target="_blank">http://127.0.0.1/</a> (или <a href="http://127.0.0.1:8080/" target="_blank">http://127.0.0.1:8080/</a> при использовании порта, отличного от стандартного).</p>
<p>Если получилось открыть приветственную страницу XAMPP -- значит, проблема на уровне системных сетевых настроек.</p>
<p>Открываем в любом текстовом редакторе файл C:\windows\system32\drivers\etc\hosts и добавляем туда строчку</p>
<pre>127.0.0.1 localhost</pre>
<p><img src="images/articles/barancev/xampp/17_hosts.png" border="0" width="500" height="336" /></p>
<p>Имейте в виду, что для модификации этого файла потребуются права администратора.</p>
<p>После того, как это изменение внесено -- вновь пробуем использовать в адресе сетевое имя, то есть открываем в браузере адрес <a href="http://localhost/" target="_blank">http://localhost/</a>, теперь всё должно сработать правильно.</p>
<p>Вторая возможная причина, из-за которой даже по IP-адресу сервер не удаётся открыть -- настройки браузера, согласно которым все запросы направляются в прокси-сервер. Нужно сделать так, чтобы запросы на адрес 127.0.0.1 туда не отправлялись, а шли прямиком к локальному веб-серверу.</p>
<p>Браузеры Internet Explorer и Chrome используют системные настройки прокси, вот так они должны выглядеть (стоит галочка "Не использовать прокси-сервер для локальных адресов"):</p>
<p><img src="images/articles/barancev/xampp/18_proxy_settings_system.png" border="0" width="500" height="306" /></p>
<p>Браузер Firefox может иметь свои собственные настройки, отличные от системных, тогда нужно вписать адрес 127.0.0.1 в список исключений:</p>
<p><img src="images/articles/barancev/xampp/19_proxy_settings_firefox.png" border="0" width="500" height="386" /></p>
<p>После этого браузер должен найти локальный веб-сервер и открыть его приветственную страницу.</p>
<p>Вот и всё, теперь уж точно сервер работает и можно переходить к установке приложений!</p>
